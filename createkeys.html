<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Sequentia Wallet</title>
  <link rel="stylesheet" type="text/css" href="css/sequentiawallet.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.5/css/uikit.min.css" />
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,900" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.5/js/uikit.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.5/js/uikit-icons.min.js"></script>
</head>
<body>
  <!-- Main menu -->
  <nav class="uk-navbar-container" uk-navbar="boundary-align: true; align: right;">
    <div class="uk-navbar-left">
      <ul class="uk-navbar-nav">
        <li><a class="uk-navbar-item uk-logo" href="index.html"> SequentiaWallet </a></li>
      </ul>
    </div>
    <div class="uk-navbar-right">
      <ul class="uk-navbar-nav">
        <li>
          <a class="uk-navbar-toggle" uk-navbar-toggle-icon href=""></a>
          <div class="uk-navbar-dropdown">
            <ul class="uk-nav uk-navbar-dropdown-nav">
              <li id="menu_item"><a href="https://genobank.herokuapp.com/">Go to Navigator</a></li>
              <li id="menu_item">
                <form class="uk-search uk-search-default">
                  <span class="uk-search-icon-flip" uk-search-icon></span>
                  <input class="uk-search-input" type="search" placeholder="Search...">
                </form>
              </li>
              <li id="menu_item"><a href="#">Contact</a></li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
  </nav>
  <!-- Closing Main menu -->

<div class="uk-grid-medium" align="center">
  <form class="uk-form-horizontal uk-margin-large">
    <div class="uk-margin">
      <label class="uk-form-label" for="form-horizontal-text">Private Key</label>
        <div class="uk-form-controls">
          <textarea id="privkey" name="privkey" class="uk-input" type="text" placeholder="Generate keys"></textarea>
        </div>
        <a id="download_privkey" download="Private_Key.txt">Save Private Key </a>
    </div>
    <div class="uk-margin">
      <label class="uk-form-label" for="form-horizontal-text">Public Key</label>
        <div class="uk-form-controls">
          <textarea id="pubkey" name="pubkey" class="uk-input" type="text" placeholder="Generate keys"></textarea>
        </div>
        <a id="download_pubkey" download="Public_Key.txt"> Save Public Key</a>
    </div>
   <a id="whitebutton" class="uk-button uk-button-default" href="genometrics.html"> Next </a>
  </form>
</div>

<script src="js/localforage.min.js"></script>
<script src="https://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="js/jsencrypt.js"></script>
<script src="js/wallet.js"></script>
<script>
    $(document).ready(function() {
      (function ($, localforage){
          function setKeys(){
          // Get the keys from localforage
          localforage.getItem('privatekey', function(err, value){
            $('#privkey').val(value);
          });
          localforage.getItem('publickey', function(err, value){
            $('#pubkey').val(value);
          });
        };
        setKeys();
      })($, localforage);
    });
    //Events
    //Download public key file
    $('#download_pubkey').click(function() {
      //Read the public key
      var content = $('#pubkey').val();
      //Create a label type a
      var link = document.createElement("a");
        link.download ="Public_Key.pem";
        link.href = 'data:application/octet-stream,'+ encodeURIComponent(content);
        link.click();
    });

    //Download private key file
    $('#download_privkey').click(function() {
      //Read the private key
      var content = $('#privkey').val();
      //Create a label type a
      var link = document.createElement("a");
        link.download ="Pivate_Key.pem";
        link.href = 'data:application/octet-stream,'+ encodeURIComponent(content);
        link.click();
    });
</script>
</body>
</html>
