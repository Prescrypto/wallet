<!DOCTYPE html>
<html>
<head>
  <title>Sequentia Wallet</title>
  <link rel="stylesheet" type="text/css" href="css/sequentiawallet.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.5/css/uikit.min.css" />
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,900" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.5/js/uikit.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.5/js/uikit-icons.min.js"></script>
</head>
<body>
<!-- Main menu -->
<nav class="uk-navbar-container" uk-navbar>
  <div class="uk-navbar-left">
  	<ul class="uk-navbar-nav">
  	  <li><a class="uk-navbar-item uk-logo" href="index.html"> SequentiaWallet </a></li>
    </ul>
  </div>
  <div class="uk-navbar-right">
    <ul class="uk-navbar-nav">
      <li><a href="#">Contact</a></li>
      <li>
        <form class="uk-search uk-search-default">
          <span class="uk-search-icon-flip" uk-search-icon></span>
          <input class="uk-search-input" type="search" placeholder="Search...">
        </form>
      </li>
    </ul>
  </div>
</nav>
<!-- Closing Main menu -->

<div class="uk-grid-medium" align="center">
  <h1 class="welcome"><span style="font-size:50px ">Welcome to</span><br>Genobank</h1>
  <p>Access your personal genomic information</p>
  <br>
  <a class="uk-button uk-button-default uk-width-1-1 uk-margin-small-bottom" href="enterkeys.html">Enter your keys</a>
  <a id="create_entropy" class="uk-button uk-button-default uk-width-1-1 uk-margin-small-bottom" >Create new keys</a>

<!-- Move mouse for 5 secs -->
<div id="modal-example" uk-modal>
  <div class="uk-modal-dialog uk-modal-body">
    <h2 class="uk-modal-title">Create your keys!</h2>
    <p id="greytxt">Please move your mouse cursor, to activate the button "Create"</p>
    <p class="uk-text-right">
    <img src="media/mouse.png">
    <button id="create_keys" class="uk-button uk-button-default" href="createkeys.html" disabled>Create</button>
    </p>
  </div>
</div>

</div>

<script src="js/localforage.min.js"></script>
<script src="https://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="js/jsencrypt.js"></script>
<script src="js/wallet.js"></script>
<script>
  // Functions
  function create_keys(){
    // Create RSA keysan and save in local forage
    var crypt = new JSEncrypt({default_key_size: 512});
    crypt.getKey();
    var private_key = crypt.getPrivateKey();
    var public_key = crypt.getPublicKey();
    save_key(private_key, public_key);
  }

  // Events
  $('#create_entropy').on('click', function() {
    UIkit.modal($("#modal-example")).show();
    setInterval(function(){
      if(document.entropy >= 1200){
        $("#create_keys").removeAttr("disabled");
      }
    }, 1000);
  });

  $('#create_keys').on('click', function(e) {
    document.location.href = 'createkeys.html';
    e.preventDefault();
    create_keys();
  });
</script>
</body>
</html>
